<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>running-chartlbi • chartlbi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="running-chartlbi">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">chartlbi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/running-prettylbi.html">running-chartlbi</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>running-chartlbi</h1>
            
      

      <div class="d-none name"><code>running-prettylbi.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installing-chartlbi-package">1. Installing <code>chartlbi</code> package<a class="anchor" aria-label="anchor" href="#installing-chartlbi-package"></a>
</h2>
<p>For this vigenette to work <code>chartlbi</code> must be installed
and exist in R’s default libpath.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># devtools::install_github("d2gex/chartlbi")</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reading-the-sample-data">2. Reading the sample data<a class="anchor" aria-label="anchor" href="#reading-the-sample-data"></a>
</h2>
<p>A data sample of a demersal species from the northern waters of the
Iberian peninsula has been provided. Although the data has been made up,
the details should be pretty realistic. The timeseries stretches from
2004 to 2016. A sample of the matrix is showed below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">length_freq_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"data/demersal_fish_sample.rds"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">length_freq_matrix</span><span class="op">)</span></span>
<span><span class="co">#&gt;   MeanLength X2004 X2005 X2006 X2007 X2008 X2009 X2010 X2011 X2012 X2013 X2014</span></span>
<span><span class="co">#&gt; 1       10.5     1     0     1     0     1     0     1     1     1     1     1</span></span>
<span><span class="co">#&gt; 2       11.5     1     0     1     0     1     0     1     1     1     1     1</span></span>
<span><span class="co">#&gt; 3       12.5     1     0     1     0     1     0     1     1     1     1     1</span></span>
<span><span class="co">#&gt; 4       13.5     1     0     1     0    26     0     1     1     1     1     1</span></span>
<span><span class="co">#&gt; 5       14.5     1     0     1     0    26     0     1     1     1     1     1</span></span>
<span><span class="co">#&gt; 6       15.5     0     0     1     0    26     1     1     1     1     1     1</span></span>
<span><span class="co">#&gt;   X2015 X2016</span></span>
<span><span class="co">#&gt; 1     0     1</span></span>
<span><span class="co">#&gt; 2     0     1</span></span>
<span><span class="co">#&gt; 3     0     1</span></span>
<span><span class="co">#&gt; 4     0     1</span></span>
<span><span class="co">#&gt; 5     0     1</span></span>
<span><span class="co">#&gt; 6     0     1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running-chartlbi">3. Running chartlbi<a class="anchor" aria-label="anchor" href="#running-chartlbi"></a>
</h2>
<p>Running <code>chartlbi</code> is pretty simple. It only requires 4
parameters:</p>
<ol style="list-style-type: decimal">
<li>Data results from the LBI algorithm</li>
<li>A context shaping the visualisation of the results. You may not need
to change the default values to start with.</li>
<li>The thresholds against which the results will be evaluated. Default
values have been provided, and you will hardly ever need to modify
this.</li>
<li>The order you would like the indicator to appear following a
bottom-top approach.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># (1) Define biological inputs and size of class length</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  binwidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  linf <span class="op">=</span> <span class="fl">49.1</span>,</span>
<span>  l50 <span class="op">=</span> <span class="fl">23</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># (2) Define the context used to graph the results. Default values provided at instantiation time. However</span></span>
<span><span class="co"># you can modify them as suits you best as PlotContext$new returns a R6 object</span></span>
<span><span class="va">stack_plot_context</span> <span class="op">&lt;-</span> <span class="fu">chartlbi</span><span class="fu">::</span><span class="va"><a href="../reference/PlotContext.html">PlotContext</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># (3) Define the threshold over which the LBI indicators will be evaluated. Default values provided at instantiation time.</span></span>
<span><span class="va">thresholds</span> <span class="op">&lt;-</span> <span class="fu">chartlbi</span><span class="fu">::</span><span class="va"><a href="../reference/Thresholds.html">Thresholds</a></span></span>
<span></span>
<span><span class="co"># (5) Define indicator order you want them to be shown as</span></span>
<span><span class="va">column_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'Pmega'</span>, <span class="st">'Lc_Lmat'</span>, <span class="st">'L25_Lmat'</span>, <span class="st">'Lmax5_Linf'</span>, <span class="st">'Lmean_Lopt'</span>, <span class="st">'Lmean_Lfem'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># (4) Run the LBI algorithm</span></span>
<span><span class="va">lbi</span> <span class="op">&lt;-</span> <span class="fu">chartlbi</span><span class="fu">::</span><span class="va"><a href="../reference/LbiAlgo.html">LbiAlgo</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">length_freq_matrix</span>, <span class="va">params</span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">lbi</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># (5) Plot the results</span></span>
<span><span class="va">lbi_plotter</span> <span class="op">&lt;-</span> <span class="fu">chartlbi</span><span class="fu">::</span><span class="va"><a href="../reference/OutputPlotter.html">OutputPlotter</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">results</span>, <span class="va">stack_plot_context</span>, <span class="va">thresholds</span><span class="op">)</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="va">lbi_plotter</span><span class="op">$</span><span class="fu">build_plots</span><span class="op">(</span><span class="va">column_order</span><span class="op">)</span></span>
<span><span class="va">graph</span></span></code></pre></div>
<p><img src="running-prettylbi_files/figure-html/unnamed-chunk-2-1.png" width="768"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan G.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
